@model IEnumerable<F_Result.Models.Account>

@{
    ViewBag.Title = "ДОБАВЛЕНИЕ";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/Content/jquery.datetimepicker.min.css" rel="stylesheet" />
<style type="text/css">
    #cleardate:hover {
        color: #d9534f;
    }

    #cleardate {
        cursor: pointer;
    }

    .batchTable tr td {
        vertical-align: middle !important;
    }
</style>

<div id="loadingImg">
    <div id="preloadImg">
        <img src="~/Content/Images/loader.gif" />
    </div>
</div>

<div class="container">
    <div class="col-lg-12">
        <h1 class="page-header">
            @ViewBag.Title
            <small>Пакетное добавление информации об остатках на счетах организаций</small>
        </h1>
        <ol class="breadcrumb">
            <li>@Html.ActionLink("Главная", "Index", "Home", new { Area = "" }, null)</li>
            <li>Показатели</li>
            <li>@Html.ActionLink("Остатки на счетах", "ABShow", "AccountsBalances")</li>
            <li class="active">Добавление</li>
        </ol>
    </div>

    <div class="row">
        <div class="col-md-6" id="resultMessage" style="cursor:pointer">
            <p class="text-success" id="MessageOk"> @TempData["MessageOk"]</p>
            <p class="text-danger" id="MessageError">  @TempData["MessageError"]</p>
        </div>
    </div>

    <div class="form-group">
        <div class="input-group" style="width:100px;">
            <input type="text"
                   class="form-control"
                   id="Date"
                   name="Date"
                   placeholder="Дата"
                   style="width:150px; text-align:center;"
                   value="@ViewData["Date"]" />
            <span class="input-group-addon" id="cleardate">
                <i class="fa fa-calendar"></i>
            </span>

        </div>
    </div>


    <div class="row">
        <table class="table batchTable">
            <tr>
                <th>
                    Организация
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.AccountNumber)
                </th>
                <th>
                    Остаток
                </th>
                <th>
                    Примечание
                </th>
            </tr>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.OrganizationName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.AccountNumber)
                    </td>
                    <td>
                        <input type="text" value="" class="form-control" style="width:160px;" onkeyup="reppoint(this)" onchange="reppoint(this)" />
                    </td>
                    <td>
                        <input type="text" value="" class="form-control" style="min-width:400px;"/>
                    </td>
                </tr>
            }
        </table>
    </div>


    <a href="#" class="scrollup1">Наверх</a>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/jquery.datetimepicker.full.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script src="~/Scripts/jquery.datetimepicker.full.min.js"></script>
    <script>
        $(function () {
            $('#loadingImg').hide();
        });
    </script>

    @*Блок скриптов для работы с DateTimePicker*@
    <script type="text/javascript">

        $.datetimepicker.setLocale('ru');

        // <![CDATA[
        jQuery(function () {
            jQuery('#Date').datetimepicker({
                format: 'd/m/Y',
                formatDate: 'd/m/Y',
                timepicker: false
            });
        });
        // ]]>

        $.validator.methods.date = function (value, element) {
            if (value) {
                try {
                    $.datepicker.parseDate('dd/MM/yy', value);
                } catch (ex) {
                    return false;
                }
            }
            return true;
        };
    </script>

    <script type="text/javascript">
        $(function () {
            $('#cleardate').on('click', function (e) {
                $('#Date').val("");
            });
        });
    </script>

    <script>
        //Separator replace. Convert "." to ","
        function reppoint(elem) {
            var d = elem.value;
            if (d.indexOf(".") > 0) {
                var outstr = d.replace(".", ",");
                elem.value = outstr;
            }
        }
    </script>
}